/* Generated By:JJTree: Do not edit this line. COOLTemplateRHSPattern.java */
package org.jamocha.parser.cool;

import org.jamocha.parser.*;
import org.jamocha.rete.*;
import org.jamocha.rule.*;

public class COOLTemplateRHSPattern extends SimpleNode {
	public COOLTemplateRHSPattern(int id) {
		super(id);
	}

	public COOLTemplateRHSPattern(COOLParser p, int id) {
		super(p, id);
	}
	public JamochaValue execute() throws EvaluationException
	{
		Deffact fact;
		Rete engine=parser.getRete();
		int i;
		Slot [] slots = new Slot[jjtGetNumChildren()];
		// Execute children, build fact from return values (RHSPatterns return slots!!)
		for (i=0;i<jjtGetNumChildren();i++)	slots[i]=jjtGetChild(i).execute().getSlotValue();
		Deftemplate tmpl = (Deftemplate) engine.getCurrentFocus().getTemplate(name);
		fact = (Deffact) tmpl.createFact(slots, -1);
		return JamochaValue.newFact(fact);
	}

}
